var express=function(p,w){"use strict";function S(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function b(e){if(e.__esModule)return e;var i=e.default;if(typeof i=="function"){var o=function r(){return this instanceof r?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};o.prototype=i.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,t.get?t:{enumerable:!0,get:function(){return e[r]}})}),o}var u={exports:{}},l={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */l.parse=x,l.serialize=T;var O=decodeURIComponent,E=encodeURIComponent,C=/; */,f=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function x(e,i){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var o={},r=i||{},t=e.split(C),s=r.decode||O,n=0;n<t.length;n++){var a=t[n],c=a.indexOf("=");if(!(c<0)){var m=a.substr(0,c).trim(),d=a.substr(++c,a.length).trim();d[0]=='"'&&(d=d.slice(1,-1)),o[m]==null&&(o[m]=_(d,s))}}return o}function T(e,i,o){var r=o||{},t=r.encode||E;if(typeof t!="function")throw new TypeError("option encode is invalid");if(!f.test(e))throw new TypeError("argument name is invalid");var s=t(i);if(s&&!f.test(s))throw new TypeError("argument val is invalid");var n=e+"="+s;if(r.maxAge!=null){var a=r.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");n+="; Max-Age="+Math.floor(a)}if(r.domain){if(!f.test(r.domain))throw new TypeError("option domain is invalid");n+="; Domain="+r.domain}if(r.path){if(!f.test(r.path))throw new TypeError("option path is invalid");n+="; Path="+r.path}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");n+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(n+="; HttpOnly"),r.secure&&(n+="; Secure"),r.sameSite){var c=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(c){case!0:n+="; SameSite=Strict";break;case"lax":n+="; SameSite=Lax";break;case"strict":n+="; SameSite=Strict";break;case"none":n+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return n}function _(e,i){try{return i(e)}catch{return e}}var g={};const P=b(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));(function(e){var i=P;e.sign=function(r,t){if(typeof r!="string")throw new TypeError("Cookie value must be provided as a string.");if(typeof t!="string")throw new TypeError("Secret string must be provided.");return r+"."+i.createHmac("sha256",t).update(r).digest("base64").replace(/\=+$/,"")},e.unsign=function(r,t){if(typeof r!="string")throw new TypeError("Signed cookie string must be provided.");if(typeof t!="string")throw new TypeError("Secret string must be provided.");var s=r.slice(0,r.lastIndexOf(".")),n=e.sign(s,t);return o(n)==o(r)?s:!1};function o(r){return i.createHash("sha1").update(r).digest("hex")}})(g);/*!
 * cookie-parser
 * Copyright(c) 2014 TJ Holowaychuk
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var j=l,N=g;u.exports=$,u.exports.JSONCookie=y,u.exports.JSONCookies=v,u.exports.signedCookie=h,u.exports.signedCookies=k;function $(e,i){var o=!e||Array.isArray(e)?e||[]:[e];return function(t,s,n){if(t.cookies)return n();var a=t.headers.cookie;if(t.secret=o[0],t.cookies=Object.create(null),t.signedCookies=Object.create(null),!a)return n();t.cookies=j.parse(a,i),o.length!==0&&(t.signedCookies=k(t.cookies,o),t.signedCookies=v(t.signedCookies)),t.cookies=v(t.cookies),n()}}function y(e){if(!(typeof e!="string"||e.substr(0,2)!=="j:"))try{return JSON.parse(e.slice(2))}catch{return}}function v(e){for(var i=Object.keys(e),o,r,t=0;t<i.length;t++)o=i[t],r=y(e[o]),r&&(e[o]=r);return e}function h(e,i){if(typeof e=="string"){if(e.substr(0,2)!=="s:")return e;for(var o=!i||Array.isArray(i)?i||[]:[i],r=0;r<o.length;r++){var t=N.unsign(e.slice(2),o[r]);if(t!==!1)return t}return!1}}function k(e,i){for(var o=Object.keys(e),r,t,s=Object.create(null),n,a=0;a<o.length;a++)t=o[a],n=e[t],r=h(n,i),n!==r&&(s[t]=r,delete e[t]);return s}var A=u.exports;const M=S(A),H=w.createProvider(e=>(e.use(M()),{server:e,request:(i,o,r)=>e[i](o,async(t,s)=>{s.send(await r({request:t,response:s,setStatusCode:s.status,setHeader:s.setHeader,setCookie:s.cookie}))})}));return p.expressProvider=H,Object.defineProperty(p,Symbol.toStringTag,{value:"Module"}),p}({},nixle);
