"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=({routers:e})=>({routers:e}),_=(e,t)=>[e,t],m=(e,{modules:t})=>(t.forEach(s=>{s.routers.forEach(([o,a])=>{a().forEach(r=>{e.methods[r.method](`/${o}`+r.path,r.handler)})})}),e.server);function l(e,t){try{return t in e}catch{return!1}}var M=Object.defineProperty,y=(e,t,s)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,i=(e,t,s)=>(y(e,typeof t!="symbol"?t+"":t,s),s);class d extends Error{constructor(t,s={}){super(t,s),i(this,"statusCode",500),i(this,"fatal",!1),i(this,"unhandled",!1),i(this,"statusMessage"),i(this,"data"),i(this,"cause"),s.cause&&!this.cause&&(this.cause=s.cause)}toJSON(){const t={message:this.message,statusCode:u(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=h(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}i(d,"__h3_error__",!0);function v(e){if(typeof e=="string")return new d(e);if(b(e))return e;const t=new d(e.message??e.statusMessage??"",{cause:e.cause||e});if(l(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=u(e.statusCode,t.statusCode):e.status&&(t.statusCode=u(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const s=t.statusMessage;h(t.statusMessage)!==s&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function b(e){return e?.constructor?.__h3_error__===!0}const p=/[^\u0009\u0020-\u007E]/g;function h(e=""){return e.replace(p,"")}function u(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}function P(e){if(typeof e=="function")return Object.assign(e,{__is_handler__:!0});const t={onRequest:f(e.onRequest),onBeforeResponse:f(e.onBeforeResponse)};return Object.assign(o=>w(o,e.handler,t),{__is_handler__:!0})}function f(e){return e?Array.isArray(e)?e:[e]:void 0}async function w(e,t,s){if(s.onRequest){for(const r of s.onRequest)if(await r(e),e.handled)return}const a={body:await t(e)};if(s.onBeforeResponse)for(const r of s.onBeforeResponse)await r(e,a);return a.body}const E=P;function R(e){return l(e,"__is_handler__")}function A(e){if(R(e))return e;if(typeof e!="function")throw new TypeError("Invalid handler. It should be a function:",e);return E(t=>S(e,t.node.req,t.node.res))}function S(e,t,s){const o=e.length>2;return new Promise((a,r)=>{const c=n=>(o&&(s.off("close",c),s.off("error",c)),n?r(v(n)):a(void 0));try{const n=e(t,s,c);o&&n===void 0?(s.once("close",c),s.once("error",c)):a(n)}catch(n){c(n)}})}const I=e=>{const t=o=>(a,r)=>e.router[o](a,A((c,n)=>r({req:c,res:n})));return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}},O=e=>{const t=o=>(a,r)=>e[o](a,async(c,n)=>{n.send(await r({req:c,res:n}))});return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}},q=e=>{const t=o=>(a,r)=>e[o](a,async(c,n)=>{n.send(await r({req:c,res:n}))});return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}},x=e=>{const t=o=>(a,r)=>e[o](a,({request:c})=>r({req:c,res:null}));return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}};exports.createApp=m;exports.createModule=g;exports.createRouter=_;exports.elysiaProvider=x;exports.expressProvider=O;exports.fastifyProvider=q;exports.nitroProvider=I;
