var scalex=function(i){"use strict";const _=({routers:e})=>({routers:e}),m=(e,t)=>[e,t],M=(e,{modules:t})=>(t.forEach(s=>{s.routers.forEach(([a,o])=>{o().forEach(r=>{e.methods[r.method](`/${a}`+r.path,r.handler)})})}),e.server);function l(e,t){try{return t in e}catch{return!1}}var y=Object.defineProperty,v=(e,t,s)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,u=(e,t,s)=>(v(e,typeof t!="symbol"?t+"":t,s),s);class d extends Error{constructor(t,s={}){super(t,s),u(this,"statusCode",500),u(this,"fatal",!1),u(this,"unhandled",!1),u(this,"statusMessage"),u(this,"data"),u(this,"cause"),s.cause&&!this.cause&&(this.cause=s.cause)}toJSON(){const t={message:this.message,statusCode:f(this.statusCode,500)};return this.statusMessage&&(t.statusMessage=h(this.statusMessage)),this.data!==void 0&&(t.data=this.data),t}}u(d,"__h3_error__",!0);function b(e){if(typeof e=="string")return new d(e);if(P(e))return e;const t=new d(e.message??e.statusMessage??"",{cause:e.cause||e});if(l(e,"stack"))try{Object.defineProperty(t,"stack",{get(){return e.stack}})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=f(e.statusCode,t.statusCode):e.status&&(t.statusCode=f(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const s=t.statusMessage;h(t.statusMessage)!==s&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(t.fatal=e.fatal),e.unhandled!==void 0&&(t.unhandled=e.unhandled),t}function P(e){return e?.constructor?.__h3_error__===!0}const w=/[^\u0009\u0020-\u007E]/g;function h(e=""){return e.replace(w,"")}function f(e,t=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?t:e}typeof setImmediate>"u"||setImmediate;function E(e){if(typeof e=="function")return Object.assign(e,{__is_handler__:!0});const t={onRequest:g(e.onRequest),onBeforeResponse:g(e.onBeforeResponse)};return Object.assign(a=>R(a,e.handler,t),{__is_handler__:!0})}function g(e){return e?Array.isArray(e)?e:[e]:void 0}async function R(e,t,s){if(s.onRequest){for(const r of s.onRequest)if(await r(e),e.handled)return}const o={body:await t(e)};if(s.onBeforeResponse)for(const r of s.onBeforeResponse)await r(e,o);return o.body}const p=E;function A(e){return l(e,"__is_handler__")}function S(e){if(A(e))return e;if(typeof e!="function")throw new TypeError("Invalid handler. It should be a function:",e);return p(t=>I(e,t.node.req,t.node.res))}function I(e,t,s){const a=e.length>2;return new Promise((o,r)=>{const c=n=>(a&&(s.off("close",c),s.off("error",c)),n?r(b(n)):o(void 0));try{const n=e(t,s,c);a&&n===void 0?(s.once("close",c),s.once("error",c)):o(n)}catch(n){c(n)}})}const O=e=>{const t=a=>(o,r)=>e.router[a](o,S((c,n)=>r({req:c,res:n})));return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}},q=e=>{const t=a=>(o,r)=>e[a](o,async(c,n)=>{n.send(await r({req:c,res:n}))});return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}},z=e=>{const t=a=>(o,r)=>e[a](o,async(c,n)=>{n.send(await r({req:c,res:n}))});return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}},H=e=>{const t=a=>(o,r)=>e[a](o,({request:c})=>r({req:c,res:null}));return{methods:{get:t("get"),post:t("post"),patch:t("patch"),put:t("put"),delete:t("delete")},server:e}};return i.createApp=M,i.createModule=_,i.createRouter=m,i.elysiaProvider=H,i.expressProvider=q,i.fastifyProvider=z,i.nitroProvider=O,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),i}({});
